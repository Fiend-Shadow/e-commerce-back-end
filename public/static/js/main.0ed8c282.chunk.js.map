{"version":3,"sources":["lib/auth-service.js","lib/Auth.js","components/Navbar.js","pages/Home.js","pages/Signup.js","pages/Login.js","pages/Private.js","components/AnonRoute.js","components/PrivateRoute.js","App.js","index.js"],"names":["authService","this","auth","axios","create","baseURL","process","withCredentials","username","password","post","then","data","get","React","createContext","Consumer","Provider","withAuth","WrappedComponent","login","signup","logout","user","isLoggedIn","props","Component","AuthProvider","state","isLoading","setState","catch","err","console","log","me","value","children","className","to","id","onClick","Home","handleFormSubmit","event","preventDefault","handleChange","target","name","onSubmit","type","onChange","component","rest","render","App","exact","path","Signup","Login","Private","ReactDOM","document","getElementById"],"mappings":"kRAsCeA,EAHK,I,WAhClB,aAAe,oBACbC,KAAKC,KAAOC,IAAMC,OAAO,CACvBC,QAASC,yCACTC,iBAAiB,I,sDAIW,IAAvBC,EAAsB,EAAtBA,SAAUC,EAAY,EAAZA,SACjB,OAAOR,KAAKC,KACTQ,KAAK,eAAgB,CAAEF,WAAUC,aACjCE,MAAK,qBAAGC,U,+BAIkB,IAAvBJ,EAAsB,EAAtBA,SAAUC,EAAY,EAAZA,SAChB,OAAOR,KAAKC,KACTQ,KAAK,cAAe,CAAEF,WAAUC,aAChCE,MAAK,qBAAGC,U,+BAKX,OAAOX,KAAKC,KAAKQ,KAAK,eAAgB,IAAIC,MAAK,qBAAGC,U,2BAKlD,OAAOX,KAAKC,KAAKW,IAAI,YAAYF,MAAK,qBAAGC,Y,QC1BdE,IAAMC,gBAA7BC,E,EAAAA,SAAUC,E,EAAAA,SAGZC,EAAW,SAAAC,GACf,wLACY,IAAD,OACP,OACE,kBAACH,EAAD,MACG,YAAkD,IAA/CI,EAA8C,EAA9CA,MAAOC,EAAuC,EAAvCA,OAAQC,EAA+B,EAA/BA,OAAQC,EAAuB,EAAvBA,KAAMC,EAAiB,EAAjBA,WAC/B,OACE,kBAACL,EAAD,eACEI,KAAMA,EACNC,WAAYA,EACZJ,MAAOA,EACPC,OAAQA,EACRC,OAAQA,GACJ,EAAKG,eAZvB,EAAM,CAAeC,cAmCjBC,E,2MACJC,MAAQ,CACNJ,YAAY,EACZD,KAAM,KACNM,WAAW,G,EAcbR,OAAS,SAACb,EAAUC,GAClBT,EACGqB,OAAO,CAAEb,WAAUC,aACnBE,MAAK,SAAAY,GAAI,OAAI,EAAKO,SAAS,CAAEN,YAAY,EAAMD,YAC/CQ,OAAM,SAAAC,GAAG,OAAIC,QAAQC,IAAIF,O,EAG9BZ,MAAQ,SAACZ,EAAUC,GACjBT,EACGoB,MAAM,CAAEZ,WAAUC,aAClBE,MAAK,SAAAY,GAAI,OAAI,EAAKO,SAAS,CAAEN,YAAY,EAAMD,YAC/CQ,OAAM,SAAAC,GAAG,OAAIC,QAAQC,IAAIF,O,EAG9BV,OAAS,WACPtB,EACGsB,SACAX,MAAK,kBAAM,EAAKmB,SAAS,CAAEN,YAAY,EAAOD,KAAM,UACpDQ,OAAM,SAAAC,GAAG,OAAIC,QAAQC,IAAIF,O,mFA7BT,IAAD,OAClBhC,EACGmC,KACAxB,MAAK,SAAAY,GAAI,OACR,EAAKO,SAAS,CAAEN,YAAY,EAAMD,KAAMA,EAAMM,WAAW,OAE1DE,OAAM,SAAAC,GAAG,OACR,EAAKF,SAAS,CAAEN,YAAY,EAAOD,KAAM,KAAMM,WAAW,S,+BAyBtD,IAAD,EACiC5B,KAAK2B,MAArCC,EADD,EACCA,UAAWL,EADZ,EACYA,WAAYD,EADxB,EACwBA,KACvBH,EAA0BnB,KAA1BmB,MAAOE,EAAmBrB,KAAnBqB,OAAQD,EAAWpB,KAAXoB,OAEvB,OACE,kBAACJ,EAAD,CAAUmB,MAAO,CAAEP,YAAWL,aAAYD,OAAMH,QAAOE,SAAQD,WAC5DpB,KAAKwB,MAAMY,c,GA7COvB,IAAMY,W,gBCPlBR,I,iLA/BH,IAAD,EAC8BjB,KAAKwB,MAAlCF,EADD,EACCA,KAAMD,EADP,EACOA,OAAQE,EADf,EACeA,WAEtB,OACE,yBAAKc,UAAU,UACb,kBAAC,IAAD,CAAMC,GAAI,IAAKC,GAAG,YAChB,qCAEDhB,EACC,oCACE,wCAAcD,EAAKf,UACnB,4BAAQiC,QAASnB,GAAjB,WAGF,oCACE,kBAAC,IAAD,CAAMiB,GAAG,UACN,IACD,4BAAQD,UAAU,iBAAlB,SAAiD,KAEnD,6BACA,kBAAC,IAAD,CAAMC,GAAG,WACN,IACD,4BAAQD,UAAU,iBAAlB,WAAmD,W,GAvB5CZ,cCMNgB,MARf,WACE,OACE,6BACE,2C,QC+CSxB,I,2MA/CbU,MAAQ,CAAEpB,SAAU,GAAIC,SAAU,I,EAElCkC,iBAAmB,SAAAC,GACjBA,EAAMC,iBADoB,MAEK,EAAKjB,MAA5BpB,EAFkB,EAElBA,SAAUC,EAFQ,EAERA,SAElB,EAAKgB,MAAMJ,OAAOb,EAAUC,I,EAG9BqC,aAAe,SAAAF,GAAU,IAAD,EACEA,EAAMG,OAAtBC,EADc,EACdA,KAAMZ,EADQ,EACRA,MACd,EAAKN,SAAL,eAAiBkB,EAAOZ,K,wEAGhB,IAAD,EACwBnC,KAAK2B,MAA5BpB,EADD,EACCA,SAAUC,EADX,EACWA,SAClB,OACE,6BACE,uCAEA,0BAAMwC,SAAUhD,KAAK0C,kBACnB,4CACA,2BACEO,KAAK,OACLF,KAAK,WACLZ,MAAO5B,EACP2C,SAAUlD,KAAK6C,eAGjB,4CACA,2BACEI,KAAK,WACLF,KAAK,WACLZ,MAAO3B,EACP0C,SAAUlD,KAAK6C,eAGjB,2BAAOI,KAAK,SAASd,MAAM,YAG7B,oDACA,kBAAC,IAAD,CAAMG,GAAI,UAAV,e,GA1Cab,cC6CNR,I,2MA7CbU,MAAQ,CAAEpB,SAAU,GAAIC,SAAU,I,EAElCkC,iBAAmB,SAAAC,GACjBA,EAAMC,iBADoB,MAEK,EAAKjB,MAA5BpB,EAFkB,EAElBA,SAAUC,EAFQ,EAERA,SAElB,EAAKgB,MAAML,MAAMZ,EAAUC,I,EAG7BqC,aAAe,SAAAF,GAAU,IAAD,EACEA,EAAMG,OAAtBC,EADc,EACdA,KAAMZ,EADQ,EACRA,MACd,EAAKN,SAAL,eAAiBkB,EAAOZ,K,wEAGhB,IAAD,EACwBnC,KAAK2B,MAA5BpB,EADD,EACCA,SAAUC,EADX,EACWA,SAElB,OACE,6BACE,qCAEA,0BAAMwC,SAAUhD,KAAK0C,kBACnB,4CACA,2BACEO,KAAK,OACLF,KAAK,WACLZ,MAAO5B,EACP2C,SAAUlD,KAAK6C,eAGjB,4CACA,2BACEI,KAAK,WACLF,KAAK,WACLZ,MAAO3B,EACP0C,SAAUlD,KAAK6C,eAGjB,2BAAOI,KAAK,SAASd,MAAM,gB,GAvCjBV,cCWLR,I,iLATX,OACE,6BACE,6CACA,uCAAajB,KAAKwB,MAAMF,KAAKf,e,GALfkB,c,QCqBPR,SAlBf,YAAmE,IAAnCQ,EAAkC,EAA7C0B,UAAsB5B,EAAuB,EAAvBA,WAAe6B,EAAQ,0CAChE,OAOE,kBAAC,IAAD,iBACMA,EADN,CAEEC,OAAQ,SAAS7B,GACf,OAAID,EAAmB,kBAAC,IAAD,CAAUe,GAAG,aAC1Bf,OAAL,EAAwB,kBAACE,EAAcD,WCArCP,SAZf,YAAsE,IAAnCQ,EAAkC,EAA7C0B,UAAsB5B,EAAuB,EAAvBA,WAAe6B,EAAQ,0CACnE,OACE,kBAAC,IAAD,iBACMA,EADN,CAEEC,OAAQ,SAAS7B,GACf,OAAID,EAAmB,kBAACE,EAAcD,GAC5BD,OAAL,EAAwB,kBAAC,IAAD,CAAUe,GAAG,kBCoBnCgB,E,iLAjBX,OACE,yBAAKjB,UAAU,aACb,kBAAC,EAAD,MAEA,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAOkB,OAAK,EAACC,KAAK,IAAIL,UAAWV,IAEjC,kBAAC,EAAD,CAAWc,OAAK,EAACC,KAAK,UAAUL,UAAWM,IAC3C,kBAAC,EAAD,CAAWF,OAAK,EAACC,KAAK,SAASL,UAAWO,IAE1C,kBAAC,EAAD,CAAcH,OAAK,EAACC,KAAK,WAAWL,UAAWQ,U,GAZvClC,aCPlBmC,IAASP,OACP,kBAAC,IAAD,KACE,kBAAC,EAAD,KACE,kBAAC,EAAD,QAGJQ,SAASC,eAAe,W","file":"static/js/main.0ed8c282.chunk.js","sourcesContent":["import axios from \"axios\";\n\nclass Auth {\n  constructor() {\n    this.auth = axios.create({\n      baseURL: process.env.REACT_APP_API_URL,\n      withCredentials: true\n    });\n  }\n\n  signup({ username, password }) {\n    return this.auth\n      .post(\"/auth/signup\", { username, password })\n      .then(({ data }) => data);\n    // .then((response) => response.data);\n  }\n\n  login({ username, password }) {\n    return this.auth\n      .post(\"/auth/login\", { username, password })\n      .then(({ data }) => data);\n    // .then((response) => response.data);\n  }\n\n  logout() {\n    return this.auth.post(\"/auth/logout\", {}).then(({ data }) => data);\n    // return this.auth.post(\"/auth/logout\", {}).then((response) => response.data);\n  }\n\n  me() {\n    return this.auth.get(\"/auth/me\").then(({ data }) => data);\n    // return this.auth.get(\"/auth/me\").then((response) => response.data);\n  }\n}\n\nconst authService = new Auth();\n// `authService` is the object with the above axios request methods\n\nexport default authService;\n","//\tlib/Auth.js\n\nimport React, { Component } from \"react\";\nimport authService from \"./auth-service\"; // IMPORT functions for axios requests to API\nconst { Consumer, Provider } = React.createContext();\n\n// HOC to create a Consumer\nconst withAuth = WrappedComponent => {\n  return class extends Component {\n    render() {\n      return (\n        <Consumer>\n          {({ login, signup, logout, user, isLoggedIn }) => {\n            return (\n              <WrappedComponent\n                user={user}\n                isLoggedIn={isLoggedIn}\n                login={login}\n                signup={signup}\n                logout={logout}\n                {...this.props}\n              />\n            );\n          }}\n        </Consumer>\n      );\n    }\n  };\n};\n\n/* \n// HOC - function component example of the same functionality\nfunction withAuthFunc(WrappedComponent) {\n  return function(props) {\n    // props will belong to the WrappedComponent\n    return (\n      <Consumer>{value => <WrappedComponent {...value} {...props} />}</Consumer>\n    );\n  };\n}\n */\n\n// Provider\nclass AuthProvider extends React.Component {\n  state = {\n    isLoggedIn: false,\n    user: null,\n    isLoading: true\n  };\n\n  componentDidMount() {\n    authService\n      .me()\n      .then(user =>\n        this.setState({ isLoggedIn: true, user: user, isLoading: false })\n      )\n      .catch(err =>\n        this.setState({ isLoggedIn: false, user: null, isLoading: false })\n      );\n  }\n\n  signup = (username, password) => {\n    authService\n      .signup({ username, password })\n      .then(user => this.setState({ isLoggedIn: true, user }))\n      .catch(err => console.log(err));\n  };\n\n  login = (username, password) => {\n    authService\n      .login({ username, password })\n      .then(user => this.setState({ isLoggedIn: true, user }))\n      .catch(err => console.log(err));\n  };\n\n  logout = () => {\n    authService\n      .logout()\n      .then(() => this.setState({ isLoggedIn: false, user: null }))\n      .catch(err => console.log(err));\n  };\n\n  render() {\n    const { isLoading, isLoggedIn, user } = this.state;\n    const { login, logout, signup } = this;\n\n    return (\n      <Provider value={{ isLoading, isLoggedIn, user, login, logout, signup }}>\n        {this.props.children}\n      </Provider>\n    );\n    /*\n      <Provider> `value={}` data will be available to all <Consumer> components \n    */\n  }\n}\n\nexport { withAuth, AuthProvider };\n\n//      Consumer ,  Provider\n","import React, { Component } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { withAuth } from \"./../lib/Auth\";\n\nclass Navbar extends Component {\n  render() {\n    const { user, logout, isLoggedIn } = this.props;\n\n    return (\n      <nav className=\"navbar\">\n        <Link to={\"/\"} id=\"home-btn\">\n          <h4>Home</h4>\n        </Link>\n        {isLoggedIn ? (\n          <>\n            <p>username: {user.username}</p>\n            <button onClick={logout}>Logout</button>\n          </>\n        ) : (\n          <>\n            <Link to=\"/login\">\n              {\" \"}\n              <button className=\"navbar-button\">Login</button>{\" \"}\n            </Link>\n            <br />\n            <Link to=\"/signup\">\n              {\" \"}\n              <button className=\"navbar-button\">Sign Up</button>{\" \"}\n            </Link>\n          </>\n        )}\n      </nav>\n    );\n  }\n}\n\nexport default withAuth(Navbar);\n","import React from 'react'\n\nfunction Home() {\n  return (\n    <div> \n      <h1>Home Page</h1>\n    </div>\n  )\n}\n\nexport default Home;","import React, { Component } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { withAuth } from \"./../lib/Auth\";\n\nclass Signup extends Component {\n  state = { username: \"\", password: \"\" };\n\n  handleFormSubmit = event => {\n    event.preventDefault();\n    const { username, password } = this.state;\n\n    this.props.signup(username, password);\n  };\n\n  handleChange = event => {\n    const { name, value } = event.target;\n    this.setState({ [name]: value });\n  };\n\n  render() {\n    const { username, password } = this.state;\n    return (\n      <div>\n        <h1>Sign Up</h1>\n\n        <form onSubmit={this.handleFormSubmit}>\n          <label>Username:</label>\n          <input\n            type=\"text\"\n            name=\"username\"\n            value={username}\n            onChange={this.handleChange}\n          />\n\n          <label>Password:</label>\n          <input\n            type=\"password\"\n            name=\"password\"\n            value={password}\n            onChange={this.handleChange}\n          />\n\n          <input type=\"submit\" value=\"Signup\" />\n        </form>\n\n        <p>Already have account?</p>\n        <Link to={\"/login\"}> Login</Link>\n      </div>\n    );\n  }\n}\n\nexport default withAuth(Signup);\n","import React, { Component } from \"react\";\nimport { withAuth } from \"./../lib/Auth\";\n\nclass Login extends Component {\n  state = { username: \"\", password: \"\" };\n\n  handleFormSubmit = event => {\n    event.preventDefault();\n    const { username, password } = this.state;\n\n    this.props.login(username, password);\n  };\n\n  handleChange = event => {\n    const { name, value } = event.target;\n    this.setState({ [name]: value });\n  };\n\n  render() {\n    const { username, password } = this.state;\n\n    return (\n      <div>\n        <h1>Login</h1>\n\n        <form onSubmit={this.handleFormSubmit}>\n          <label>Username:</label>\n          <input\n            type=\"text\"\n            name=\"username\"\n            value={username}\n            onChange={this.handleChange}\n          />\n\n          <label>Password:</label>\n          <input\n            type=\"password\"\n            name=\"password\"\n            value={password}\n            onChange={this.handleChange}\n          />\n\n          <input type=\"submit\" value=\"Login\" />\n        </form>\n      </div>\n    );\n  }\n}\n\nexport default withAuth(Login);\n","import React, { Component } from \"react\";\nimport { withAuth } from \"./../lib/Auth\";\n\nclass Private extends Component {\n  render() {\n    return (\n      <div>\n        <h1>Private Route</h1>\n        <h1>Welcome {this.props.user.username}</h1>\n      </div>\n    );\n  }\n}\n\nexport default withAuth(Private);\n","//\tcomponents/AnonRoute.js\n\nimport React from \"react\";\nimport { Route, Redirect } from \"react-router-dom\";\nimport { withAuth } from \"../lib/Auth\";\n\nfunction AnonRoute({ component: Component, isLoggedIn, ...rest }) {\n  return (\n    // <Route\n    //   {...rest}\n    //   render={props =>\n    //     !isLoggedIn ? <Component {...props} /> : <Redirect to=\"/private\" />\n    //   }\n    // />\n    <Route\n      {...rest}\n      render={function(props) {\n        if (isLoggedIn) return <Redirect to=\"/private\" />;\n        else if (!isLoggedIn) return <Component {...props} />;\n      }}\n    />\n  );\n}\n\nexport default withAuth(AnonRoute);\n","//\tcomponents/PrivateRoute.js\n\nimport React from \"react\";\nimport { Route, Redirect } from \"react-router-dom\";\nimport { withAuth } from \"../lib/Auth\";\n\nfunction PrivateRoute({ component: Component, isLoggedIn, ...rest }) {\n  return (\n    <Route\n      {...rest}\n      render={function(props) {\n        if (isLoggedIn) return <Component {...props} />;\n        else if (!isLoggedIn) return <Redirect to=\"/login\" />;\n      }}\n    />\n  );\n}\n\nexport default withAuth(PrivateRoute);\n","import React, { Component } from \"react\";\nimport \"./App.css\";\nimport { Switch, Route } from \"react-router-dom\";\n\nimport Navbar from \"./components/Navbar\";\nimport Home from \"./pages/Home\";\nimport Signup from \"./pages/Signup\";\nimport Login from \"./pages/Login\";\nimport Private from \"./pages/Private\";\n\nimport AnonRoute from \"./components/AnonRoute\";\nimport PrivateRoute from \"./components/PrivateRoute\";\n\nclass App extends Component {\n  render() {\n    return (\n      <div className=\"container\">\n        <Navbar />\n\n        <Switch>\n          <Route exact path=\"/\" component={Home} />\n\n          <AnonRoute exact path=\"/signup\" component={Signup} />\n          <AnonRoute exact path=\"/login\" component={Login} />\n\n          <PrivateRoute exact path=\"/private\" component={Private} />\n        </Switch>\n      </div>\n    );\n  }\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { BrowserRouter as Router } from \"react-router-dom\";\nimport { AuthProvider } from \"./lib/Auth\";\nimport App from \"./App\";\n\nReactDOM.render(\n  <Router>\n    <AuthProvider>\n      <App />\n    </AuthProvider>\n  </Router>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}